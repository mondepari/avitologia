# Настройка Docker-контейнеров для проекта

Это руководство содержит информацию о развертывании проекта с использованием Docker.

## Структура Docker-конфигурации

Проект настроен для развертывания с использованием Docker и Docker Compose, что обеспечивает изолированную среду и упрощает процесс установки. Основные файлы:

- `Dockerfile` - описывает сборку образа приложения
- `docker-compose.yml` - настраивает запуск необходимых контейнеров
- `start.sh` - скрипт для быстрого запуска проекта
- `update.sh` - скрипт для обновления проекта
- `.env.example` - пример файла с настройками окружения

## Компоненты Docker-конфигурации

### 1. Приложение (Node.js)

Основное приложение работает в контейнере на базе Node.js. Контейнер собирается из официального образа `node:20-alpine` с установкой всех необходимых зависимостей и сборкой проекта.

### 2. База данных (PostgreSQL)

PostgreSQL работает в отдельном контейнере, данные сохраняются в постоянном томе Docker. По умолчанию, база данных доступна только внутри Docker-сети.

## Краткое руководство по запуску

1. Убедитесь, что у вас установлены Docker и Docker Compose:
   ```bash
   docker --version
   docker-compose --version
   ```

2. Запустите скрипт быстрого старта:
   ```bash
   ./start.sh
   ```

3. После завершения, приложение будет доступно по адресу: 
   ```
   http://localhost:5000
   ```

4. Проверьте статус контейнеров:
   ```bash
   docker-compose ps
   ```

## Управление контейнерами

- **Запуск контейнеров**: `docker-compose up -d`
- **Остановка контейнеров**: `docker-compose down`
- **Просмотр логов**: `docker-compose logs -f [service_name]`
- **Перезапуск контейнеров**: `docker-compose restart`
- **Обновление проекта**: `./update.sh`

## Дополнительные возможности

### Продакшн окружение

Для продакшн-среды вы можете включить использование Nginx и SSL:

1. Откройте `docker-compose.yml`
2. Раскомментируйте сервис nginx
3. Настройте SSL-сертификаты с помощью Let's Encrypt

### Настройка переменных окружения

Вы можете настроить параметры окружения, создав файл `.env` на основе примера:

```bash
cp .env.example .env
```

И затем отредактировав его:

```bash
nano .env
```

## Подробная документация

Для более детальной информации о развертывании проекта, обратитесь к следующим документам:

- [Инструкции по развертыванию](DEPLOY_INSTRUCTIONS.md)
- [Руководство по Docker](DOCKER_GUIDE.md)

## Примечания по безопасности

- Для продакшн-среды обязательно замените стандартные пароли в `.env` файле
- Регулярно обновляйте Docker-образы для получения последних исправлений безопасности
- Рекомендуется настроить регулярное резервное копирование базы данных

## Требования к системе

- Docker 20.10+ 
- Docker Compose 2.0+
- 2 ГБ RAM (минимум)
- 20+ ГБ дискового пространства